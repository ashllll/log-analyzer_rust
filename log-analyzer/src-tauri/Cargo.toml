[package]
name = "log-analyzer"
version = "0.0.124"
description = "A Tauri App"
authors = ["you"]
edition = "2021"

[build-dependencies]
tauri-build = { version = "2.0.0", features = [] }

[dependencies]
tauri = { version = "2.0.0", features = [] }
tauri-plugin-opener = "2.0.0"
tauri-plugin-dialog = "2.0.0"
tauri-plugin-shell = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
uuid = { version = "1.0", features = ["v4", "serde"] }
regex = "1.10"
chrono = "0.4"
walkdir = "2.4"
tempfile = "3.10"
zip = "0.6"
tar = "0.4"
flate2 = "1.0"
mime_guess = "2.0"
encoding_rs = "0.8"
tokio = { version = "1", features = ["full"] }
bincode = "1.3"
rayon = "1.8"  # 并行处理
dunce = "1.0"   # Windows 路径规范化（UNC路径处理）
lru = "0.12"    # LRU 缓存（搜索结果缓存）
notify = "6.1"  # 文件系统监听
unicode-normalization = "0.1"  # Unicode规范化
aho-corasick = "1.0"  # 多模式匹配算法（搜索性能优化）
thiserror = "1.0"  # 错误处理
async-trait = "0.1"  # 异步trait支持
sysinfo = { version = "0.31", default-features = true }
once_cell = "1.20"  # 延迟初始化静态变量

# Phase 1: Industry-Standard Error Handling & Logging
eyre = "0.6"  # 现代错误处理
color-eyre = "0.6"  # 增强错误报告
miette = { version = "5.0", features = ["fancy"] }  # 用户友好的错误诊断
tracing = "0.1"  # 结构化日志和追踪
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }  # 日志订阅器
tracing-appender = "0.2"  # 日志文件轮转
sentry = { version = "0.32", features = ["tracing"] }  # 错误监控

# Phase 1: High-Performance Concurrency
parking_lot = { version = "0.12", features = ["arc_lock", "send_guard"] }  # 高性能锁
crossbeam = "0.8"  # 无锁数据结构
tokio-util = { version = "0.7", features = ["rt"] }  # 异步工具和取消令牌

# Phase 2: Enterprise-Grade Caching
moka = { version = "0.12", features = ["future", "sync"] }  # 企业级缓存系统

# Rate limiting using governor (industry-standard)
governor = { version = "0.6", features = ["std"] }  # 速率限制器
nonzero_ext = "0.3"  # 辅助库，用于 governor

# Phase 2: High-Performance Search Engine
tantivy = { version = "0.22", features = ["mmap"] }  # Rust 原生全文搜索引擎
roaring = "0.10"  # 高效位图索引

# Phase 2: Real-time State Synchronization
tokio-tungstenite = "0.21"  # WebSocket 服务器实现
futures-util = "0.3"  # 异步工具（WebSocket 流处理）

# Phase 3: Production Validation Framework
validator = { version = "0.18", features = ["derive"] }  # 结构化验证框架
sanitize-filename = "0.5"  # 文件名安全化

# Phase 3: Automatic Resource Management
scopeguard = "1.2"  # RAII模式和自动资源清理

# Phase 4: Configuration Management
toml = "0.8"  # TOML配置文件解析
dashmap = "5.5"  # 并发哈希映射
sha2 = "0.10"  # SHA-256 哈希算法
sqlx = { version = "0.7", features = ["runtime-tokio-native-tls", "sqlite"] }  # SQLite 数据库
async-compression = { version = "0.4", features = ["tokio", "gzip", "zstd"] }  # 流式压缩/解压
num_cpus = "1.16"  # CPU 核心数检测

# Phase 5: Archive Support (Pure Rust Priority)
# Prefer pure Rust implementations, fall back to C bindings for edge cases
# Note: unarc-rs has dependency conflicts, using rar crate instead for pure Rust RAR support
rar = "0.4"  # Pure Rust RAR library (basic extraction support)

# Phase 4: Testing Infrastructure
[dev-dependencies]
rstest = "0.18"  # 增强的单元测试框架
proptest = "1.4"  # 属性测试框架
criterion = { version = "0.5", features = ["html_reports"] }  # 性能基准测试
tokio-test = "0.4"  # 异步测试工具

