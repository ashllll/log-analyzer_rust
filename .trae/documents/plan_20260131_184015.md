# 二次检查修复计划

## 修复严重Bug

### Bug #1: 符号链接处理逻辑不完整

**问题**: 三处目录处理代码中，当 `FOLLOW_SYMLINKS=true` 时，代码记录日志说要"following symlink"，但实际没有使用目标路径。

**修复方案**:

修改 `processor.rs` 中三处目录处理逻辑：

1. 在符号链接分支中，当 `follow_symlinks=true` 时：
   - 使用 `target` (解析出的目标路径) 替代 `entry.path()` 进行处理
   - 需要处理相对路径和绝对路径的情况

2. 代码结构改为：
```rust
if entry.path_is_symlink() {
    if follow_symlinks {
        if let Ok(target) = entry.path().read_link() {
            // 构建目标路径（可能是相对或绝对）
            let target_path = if target.is_absolute() {
                target
            } else {
                entry.path().parent().unwrap().join(&target)
            };
            // 使用 target_path 进行递归处理
            ...
        } else {
            continue;
        }
    } else {
        continue;
    }
}
```

**涉及文件**:
- `log-analyzer/src-tauri/src/archive/processor.rs`

## 验证

- 运行 `cargo check` 确保编译通过
- 代码逻辑符合 `code-quality` 技能指导的正确性原则