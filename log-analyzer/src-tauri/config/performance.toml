# Performance Optimization Configuration
# 性能优化配置文件
#
# 此配置文件用于生产环境的性能调优
# 根据实际硬件和负载情况调整参数

[search_engine]
# 搜索引擎配置
default_timeout_ms = 200          # 默认搜索超时时间（毫秒）
max_results = 50000               # 最大搜索结果数
index_path = "./search_index"     # 索引存储路径
writer_heap_size = 50000000       # 索引写入器堆大小（字节，50MB）

[cache]
# 缓存配置
l1_max_capacity = 1000            # L1 内存缓存最大容量（条目数）
l1_ttl_seconds = 3600             # L1 缓存 TTL（秒，1小时）
compression_threshold = 10240     # 压缩阈值（字节，10KB）

[state_sync]
# 状态同步配置
enable_websocket = false          # 是否启用 WebSocket 状态同步
websocket_port = 8080             # WebSocket 服务器端口
max_connections = 100             # 最大并发连接数
ping_interval_ms = 30000          # 心跳间隔（毫秒，30秒）

[monitoring]
# 性能监控配置
enable_metrics = true             # 是否启用性能指标收集
enable_alerts = true              # 是否启用性能告警
enable_sentry = false             # 是否启用 Sentry 错误监控
sentry_dsn = ""                   # Sentry DSN（留空则禁用）

# 告警阈值
[monitoring.thresholds]
search_response_time_ms = 200     # 搜索响应时间告警阈值（毫秒）
cache_response_time_ms = 50       # 缓存响应时间告警阈值（毫秒）
sync_latency_ms = 100             # 状态同步延迟告警阈值（毫秒）
cpu_usage_percent = 80            # CPU 使用率告警阈值（百分比）
memory_usage_percent = 90         # 内存使用率告警阈值（百分比）

[auto_tuning]
# 自动调优配置
enable_index_optimizer = true     # 是否启用索引自动优化
enable_cache_tuner = true         # 是否启用缓存自动调优
enable_dynamic_optimizer = true   # 是否启用动态资源分配
optimization_interval_seconds = 300  # 优化检查间隔（秒，5分钟）

[concurrency]
# 并发配置
max_concurrent_searches = 10      # 最大并发搜索数
reader_pool_size = 4              # 索引读取器池大小
parallel_indexing_threads = 0     # 并行索引线程数（0=自动检测CPU核心数）

[advanced]
# 高级配置
enable_query_cache = true         # 是否启用查询缓存
enable_highlighting = true        # 是否启用搜索结果高亮
enable_autocomplete = true        # 是否启用自动补全
enable_bitmap_index = true        # 是否启用位图索引
